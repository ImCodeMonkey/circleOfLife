(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/loginAuthorization/authorization/authorization"],{"0df1":function(t,e,n){"use strict";n("9798");var i=r(n("b0ce")),o=r(n("7a75"));function r(t){return t&&t.__esModule?t:{default:t}}Page((0,i.default)(o.default))},"154e":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticClass:"content"},[n("view",{staticClass:"oauth-row"},[n("view",{staticClass:"uni-flex uni-column"},[t._m(0),n("view",{staticClass:"flex-item flex-item-V form_box"},[n("view",{staticClass:"uni-btn-v"},[n("button",{directives:[{name:"show",rawName:"v-show",value:!t.authorization.show,expression:"!authorization.show"}],attrs:{type:"primary","open-type":t.openType,"app-parameter":t.weixin,eventid:"6390a04d-0"},on:{tap:function(e){t.oauth()}}},[t._v(t._s(t.authorization.text))])],1)]),n("view",{staticClass:"flex-item flex-item-V uni-center uni-h6"},[t._v(t._s(t.copyright))])])]),n("view",{staticClass:"m_authorization"},[n("neil-modal",{attrs:{show:t.authorization.show,title:"请点击授权按钮授权",eventid:"6390a04d-1",mpcomid:"6390a04d-0"},on:{confirm:function(e){t.confirmBtn()},cancel:function(e){t.cancelBtn()}}})],1)])},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticClass:"flex-item flex-item-V uni-center uni-word"},[n("text",{staticClass:"uni-h4"},[t._v("尊敬的用户您好，本程序用户信息依赖微信用户信息，请允许使用微信授权，否则应用无法记录您的个人信息。")])])}];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o})},"57fb":function(t,e,n){"use strict";n.r(e);var i=n("5ba3"),o=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,function(){return i[t]})}(r);e["default"]=o.a},"5ba3":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n("2f62");function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){r(t,e,n[e])})}return t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var a={data:function(){return{providerList:[],authorization:{show:!0,text:"点击按钮进行授权"},weixin:"",openType:"getUserInfo"}},computed:o({},(0,i.mapState)(["localhost","copyright"])),methods:{getProvider:function(){var e=this,n=["weixin"];t.getProvider({service:"oauth",success:function(t){if(t.provider&&t.provider.length){for(var i=0;i<t.provider.length;i++)~n.indexOf(t.provider[i])&&e.providerList.push({value:t.provider[i]});e.hasProvider=!0}},fail:function(t){console.error("获取服务供应商失败："+JSON.stringify(t))}})},oauth:function(){var e=this,n=this,i=n.providerList[0].value;n.authorization.text="授权中，请稍后...",t.login({provider:i,success:function(o){t.getUserInfo({provider:i,withCredentials:!0,success:function(i){t.request({url:e.localhost+"/login",method:"get",header:{"x-wx-code":o.code,"x-wx-iv":i.iv,"x-wx-encrypted-data":i.encryptedData},success:function(t){t.data.success=!0,n.weixin=JSON.stringify(t),n.openType="launchApp",n.authorization.text="授权成功，点击跳转至app端"},fail:function(t){console.error("获取唯一标识失败："+JSON.stringify(t))},complete:function(){}})},fail:function(t){console.error(JSON.stringify(t))}})},fail:function(t){console.error("授权登录失败："+JSON.stringify(t))}})},confirmBtn:function(){console.log("点击了确认按钮"),this.authorization.show=!1},cancelBtn:function(){this.authorization.show=!1,this.openType="launchApp",this.authorization.text="授权失败，点击跳转至app端",this.weixin='{"success":false}'}},onLoad:function(){this.$store.commit("userInfoUpdate"),this.getProvider()}};e.default=a}).call(this,n("649d")["default"])},"5dee":function(t,e,n){"use strict";var i=n("91b3"),o=n.n(i);o.a},"7a75":function(t,e,n){"use strict";n.r(e);var i=n("154e"),o=n("57fb");for(var r in o)"default"!==r&&function(t){n.d(e,t,function(){return o[t]})}(r);n("5dee");var a=n("2877"),s=Object(a["a"])(o["default"],i["a"],i["b"],!1,null,null,null);e["default"]=s.exports},"91b3":function(t,e,n){}},[["0df1","common/runtime","common/vendor"]]]);